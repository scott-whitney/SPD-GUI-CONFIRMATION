<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Note Taker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.1.3/flatly/bootstrap.min.css" />
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary"">
    <a class="navbar-brand" href="#">DATA UPS</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Setup <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Update Backup</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/search">Search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Confirmations</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Create New Sub Folder</a>
        </li>
      </ul>
      <span class="navbar-text">
        Scott Free Software
    </div>
  </nav>
  <div>
    <nav class="navbar navbar-light bg-light">
      <form class="form-inline">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0 OrderNumber" type="submit">Order Number</button>
        <button class="btn btn-outline-success my-2 my-sm-0 TrackingNumber" type="submit">Tracking Number</button>
        <button class="btn btn-outline-success my-2 my-sm-0 Receiver" type="submit">Receiver</button>
      </form>
    </nav>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">Search Results</h4>
    </div>
    <div class="panel-body" id="tableSection">
    </div>
  </div>

  <div class='container' id='tableResults'>
    <div class='row'>
      <div class="col-sm orderNumberColumn">
        Order Number
      </div>
      <div class="col-sm">
        Tracking Number
      </div>
      <div class="col-sm">
        Date
      </div>
      <div class="col-sm">
        Receiver
      </div>
      <div class="col-sm">
        Cost
      </div>
      <div class="col-sm">
        Weight
      </div>
      <div class="col-sm">
        Receiver Order Number
      </div>


    </div>

  </div>







  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- <script src="./assets/javascript/index.js"></script> -->
</body>

</html>

<script text="text/javascript">

  $(".update").on("click", function() {
    console.log("testing")
    var currentURL = window.location.origin
    console.log(currentURL);
    $.ajax({url: currentURL + "/api/update", method: "GET"})
      .done(function(csvData) {
        console.log(csvData)
      })
  })

  $(".OrderNumber").on("click", function() {
    console.log("Order Number")
  })

  $(".TrackingNumber").on("click", function() {
    console.log(" Tracking Number")
  })

  $(".Receiver").on("click", function() {
    console.log("Receiver")
  })

  function runResultsQuery() {
    var currentURL = window.location.origin;
    $.ajax({url: currentURL + "/api/search", method: "GET"})
      .done(function(resultsData) {
        console.log(resultsData)
        for (var i=0; i<resultsData.length; i++){
          let newRow = $("<div>");
            newRow.addClass('row OrderRow')
            $('#tableResults').append(newRow)




          let orderLine = $("<div>");
            orderLine.addClass('col-sm');
            orderLine.attr('id', 'orderNumberCol-' + i+1)
            newRow.append(orderLine);
            $("#orderNumberCol-" + i+1).append('<p>' + resultsData[i].ORDERNUMBER + '<p>')
          
          let trackingLine = $("<div>");
            trackingLine.addClass('col-sm');
            trackingLine.attr('id', 'trackingNumberCol-' + i+1)
            newRow.append(trackingLine);
            trackingLine.append('<p>' + resultsData[i].TRACKINGNUMBER + '<p>')

          let DateLine = $("<div>");
            DateLine.addClass('col-sm');
            DateLine.attr('id', 'dateCol-' + i+1)
            newRow.append(DateLine);
            DateLine.append('<p>' + resultsData[i].DATE + '<p>')

          let ReceiverLine = $("<div>");
            ReceiverLine.addClass('col-sm');
            ReceiverLine.attr('id', 'dateCol-' + i+1)
            newRow.append(ReceiverLine);
            ReceiverLine.append('<p>' + resultsData[i].RECEIVER + '<p>')

          let CostLine = $("<div>");
            CostLine.addClass('col-sm');
            CostLine.attr('id', 'dateCol-' + i+1)
            newRow.append(CostLine);
            CostLine.append('<p>' + resultsData[i].COST + '<p>')

          let WeightLine = $("<div>");
            WeightLine.addClass('col-sm');
            WeightLine.attr('id', 'dateCol-' + i+1)
            newRow.append(WeightLine);
            WeightLine.append('<p>' + resultsData[i].WEIGHT + '<p>')

          let ReceiverOrderLine = $("<div>");
            ReceiverOrderLine.addClass('col-sm');
            ReceiverOrderLine.attr('id', 'dateCol-' + i+1)
            newRow.append(ReceiverOrderLine);
            ReceiverOrderLine.append('<p>' + resultsData[i].RECEIVERORDERNUMBER + '<p>')

        }
      })

  }

  runResultsQuery();
  

  
  </script>